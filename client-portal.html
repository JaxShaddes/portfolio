<!DOCTYPE html>
<html lang="en" class="antialiased bg-[#f4f4f0] text-[#111]">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bruno Clemente | Client-Portal</title>
  <meta name="description" content="Client access portal." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            display: ['Space Grotesk', 'sans-serif'],
          },
          colors: {
            'off-white': '#f4f4f0',
            'black': '#111111',
            'accent': 'var(--accent-color, #FF3300)',
            'gray-light': '#e5e5e5',
          },
        }
      }
    }
  </script>

  <style>
    :root { --accent-color: #4b5670; }
    body { overflow-x: hidden; }

    .grid-overlay {
      background-size: 100px 100px;
      background-image:
        linear-gradient(to right, rgba(0, 0, 0, 0.05) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(0, 0, 0, 0.05) 1px, transparent 1px);
      pointer-events: none;
    }

    .field {
      outline: none;
      transition: box-shadow .2s, border-color .2s, transform .2s;
    }
    .field:focus {
      border-color: rgba(17,17,17,.9);
      box-shadow: 0 0 0 4px rgba(75,86,112,.15);
    }

    .loading-dots {
      display: inline-flex;
      gap: 4px;
      margin-left: 6px;
      align-items: center;
    }
    .loading-dots .dot {
      width: 6px;
      height: 6px;
      border-radius: 2px;
      background: #111111;
      opacity: 0.3;
      box-shadow: 0 0 10px rgba(17,17,17,0.25);
      animation: dotPulse 0.9s ease-in-out infinite;
    }
    .loading-dots .dot:nth-child(2) { animation-delay: 0.15s; }
    .loading-dots .dot:nth-child(3) { animation-delay: 0.3s; }

    @keyframes dotPulse {
      0%, 100% { opacity: 0.25; transform: scale(0.6); }
      50% { opacity: 0.95; transform: scale(1.1); }
    }

    .status-tech {
      font-family: "Space Grotesk", sans-serif;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      font-size: 11px;
    }

    .db-scan {
      position: relative;
      height: 8px;
      margin-top: 8px;
      border-radius: 999px;
      background: rgba(17,17,17,0.08);
      border: 1px solid rgba(17,17,17,0.18);
      overflow: hidden;
    }
    .db-scan::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(17,17,17,0.65), transparent);
      transform: translateX(-100%);
      animation: scanLine 1.1s linear infinite;
    }
    .db-scan::after {
      content: "";
      position: absolute;
      left: -30%;
      width: 30%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(17,17,17,0.35), transparent);
      animation: scanLine 1.1s linear infinite 0.2s;
    }
    @keyframes scanLine {
      to { transform: translateX(200%); }
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  </style>
</head>

<body class="min-h-screen">
  <div class="fixed inset-0 grid-overlay opacity-60"></div>

  <nav class="fixed top-0 left-0 w-full z-50 flex justify-between items-center px-6 py-6 mix-blend-difference text-[#f4f4f0]">
    <a href="./index.html"
       class="font-display font-bold text-xl tracking-tighter uppercase cursor-pointer hidden md:block hover:text-accent transition-colors">
      Bruno Clemente
    </a>
    <a href="./index.html"
       class="font-display font-bold text-xl tracking-tighter uppercase cursor-pointer md:hidden hover:text-accent transition-colors">
      BC
    </a>

    <div class="flex gap-4 md:gap-8 font-sans text-xs md:text-sm uppercase tracking-widest">
      <a href="./index.html" class="hover:text-accent transition-colors" data-i18n="nav.back">Back</a>
    </div>
  </nav>

  <main class="relative pt-28 md:pt-32 px-6 pb-16">
    <div class="max-w-3xl mx-auto">
      <div class="mb-10 md:mb-12">
        <div class="font-display uppercase tracking-[0.25em] text-xs mb-3 opacity-70" data-i18n="hero.kicker">Client Portal</div>
        <h1 class="font-display font-bold tracking-tighter text-4xl md:text-6xl leading-[0.95]">
          <span data-i18n="hero.title">Client Access</span>
        </h1>
        <p class="mt-4 max-w-2xl text-sm md:text-base opacity-80" data-i18n="hero.subtitle">
          Enter your client ID to continue.
        </p>
      </div>

      <section class="border border-black/10 bg-white/40 backdrop-blur-sm rounded-2xl p-6 md:p-7 shadow-sm">
        <label class="block text-xs uppercase tracking-widest opacity-70" for="clientId" data-i18n="form.label.clientId">
          Client ID
        </label>

        <div class="mt-2 flex gap-2">
          <input id="clientId" type="text" autocomplete="off"
                 class="field w-full px-4 py-3 rounded-xl border border-black/10 bg-[#f4f4f0] text-black font-sans text-sm"
                 placeholder="Enter your ID" data-i18n-placeholder="form.placeholder.clientId" />
          <button id="continueBtn" type="button"
                  class="px-5 py-3 rounded-xl bg-black text-[#f4f4f0] hover:bg-[#111] transition-colors font-sans text-xs uppercase tracking-widest">
            <span data-i18n="form.button.continue">Continue</span>
          </button>
        </div>

        <div id="status" class="mt-4 text-sm opacity-80 min-h-[1.5rem]" aria-live="polite">
          <span id="statusLabel" class="status-tech"></span>
          <span id="statusDots" class="loading-dots hidden" aria-hidden="true">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
          </span>
          <div id="statusScan" class="db-scan hidden" aria-hidden="true"></div>
        </div>
      </section>
    </div>
  </main>

  <div id="lang-modal" class="fixed inset-0 z-[11000] hidden items-center justify-center bg-black/70 px-6">
    <div class="w-full max-w-md border border-black bg-[#f4f4f0] p-6 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]">
      <div class="font-display text-2xl uppercase tracking-tight mb-2">Choose your language</div>
      <p class="text-sm opacity-70 mb-6">Escolha o idioma preferido</p>
      <div class="flex flex-col gap-3">
        <button type="button" data-lang="pt"
                class="w-full px-4 py-3 border border-black bg-white hover:bg-black hover:text-white transition-colors font-sans text-xs uppercase tracking-widest interactive">
          Português (Portugal)
        </button>
        <button type="button" data-lang="en"
                class="w-full px-4 py-3 border border-black bg-white hover:bg-black hover:text-white transition-colors font-sans text-xs uppercase tracking-widest interactive">
          English (International)
        </button>
      </div>
    </div>
  </div>

  <script>
    const LANG_KEY = "bc_lang";
    const SUPPORTED_LANGS = ["en", "pt"];

    const I18N = {
      en: {
        "meta.title": "Bruno Clemente | Client-Portal",
        "meta.description": "Client access portal.",
        "nav.back": "Back",
        "hero.kicker": "Client Portal",
        "hero.title": "Client Access",
        "hero.subtitle": "Enter your client ID to continue.",
        "form.label.clientId": "Client ID",
        "form.placeholder.clientId": "Enter your ID",
        "form.button.continue": "Continue",
        "status.enterId": "Please enter your client ID.",
        "status.linking": "Linking",
        "status.establishing": "Establishing secure link",
        "status.querying": "Querying client index",
        "status.decrypting": "Decrypting client record"
      },
      pt: {
        "meta.title": "Bruno Clemente | Portal do Cliente",
        "meta.description": "Portal de acesso do cliente.",
        "nav.back": "Voltar",
        "hero.kicker": "Portal do Cliente",
        "hero.title": "Acesso do Cliente",
        "hero.subtitle": "Introduz o teu ID de cliente para continuar.",
        "form.label.clientId": "ID do Cliente",
        "form.placeholder.clientId": "Introduz o teu ID",
        "form.button.continue": "Continuar",
        "status.enterId": "Por favor, introduz o teu ID de cliente.",
        "status.linking": "A ligar",
        "status.establishing": "A estabelecer ligação segura",
        "status.querying": "A consultar o índice de clientes",
        "status.decrypting": "A desencriptar o registo do cliente"
      }
    };

    const getStoredLang = () => {
      try {
        const stored = localStorage.getItem(LANG_KEY);
        return SUPPORTED_LANGS.includes(stored) ? stored : null;
      } catch {
        return null;
      }
    };

    const storedLang = getStoredLang();
    let currentLang = storedLang || "en";
    const hasLangPref = !!storedLang;

    const $ = (id) => document.getElementById(id);

    const setDocumentLang = (lang) => {
      document.documentElement.setAttribute("lang", lang === "pt" ? "pt-PT" : "en");
    };

    const t = (key, vars = {}) => {
      const dict = I18N[currentLang] || I18N.en;
      let str = dict[key] || I18N.en[key] || key;
      return str.replace(/\{(\w+)\}/g, (_, k) => (vars[k] !== undefined ? vars[k] : ""));
    };

    const applyI18n = (lang) => {
      const dict = I18N[lang] || I18N.en;
      document.title = dict["meta.title"];
      const desc = document.querySelector('meta[name="description"]');
      if (desc) desc.setAttribute("content", dict["meta.description"]);
      document.querySelectorAll("[data-i18n]").forEach((el) => {
        const key = el.getAttribute("data-i18n");
        if (dict[key]) el.textContent = dict[key];
      });
      document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
        const key = el.getAttribute("data-i18n-placeholder");
        if (dict[key]) el.setAttribute("placeholder", dict[key]);
      });
    };

    const showLangModal = () => {
      const modal = $("lang-modal");
      if (!modal) return;
      modal.classList.remove("hidden");
      modal.classList.add("flex");
      document.body.style.overflow = "hidden";
    };

    const hideLangModal = () => {
      const modal = $("lang-modal");
      if (!modal) return;
      modal.classList.add("hidden");
      modal.classList.remove("flex");
      document.body.style.overflow = "";
    };

    const initLanguage = () => {
      setDocumentLang(currentLang);
      applyI18n(currentLang);
      const modal = $("lang-modal");
      if (modal) {
        modal.querySelectorAll("[data-lang]").forEach((btn) => {
          btn.addEventListener("click", () => {
            const next = btn.getAttribute("data-lang");
            currentLang = SUPPORTED_LANGS.includes(next) ? next : "en";
            try {
              localStorage.setItem(LANG_KEY, currentLang);
            } catch {}
            setDocumentLang(currentLang);
            applyI18n(currentLang);
            hideLangModal();
          });
        });
      }
      if (!hasLangPref) showLangModal();
    };

    initLanguage();

    function setStatus(msg, type = "neutral", opts = {}) {
      const el = $("status");
      const base = "mt-4 text-sm min-h-[1.5rem]";
      const color =
        type === "error" ? "text-red-700" :
        type === "success" ? "text-green-700" :
        "opacity-80";
      el.className = `${base} ${color}`;
      const label = $("statusLabel");
      const dots = $("statusDots");
      const scan = $("statusScan");
      if (label) label.textContent = msg || "";
      else el.textContent = msg || "";
      if (dots) dots.classList.toggle("hidden", !opts.loading);
      if (scan) scan.classList.toggle("hidden", !opts.loading);
      el.setAttribute("aria-busy", opts.loading ? "true" : "false");
    }

    const searchTimers = [];
    function clearSearchTimers() {
      while (searchTimers.length) {
        clearTimeout(searchTimers.pop());
      }
    }

    function goToClient() {
      const id = ($("clientId").value || "").trim();
      if (!id) {
        clearSearchTimers();
        setStatus(t("status.enterId"), "error");
        return;
      }
      const input = $("clientId");
      const button = $("continueBtn");
      input.disabled = true;
      button.disabled = true;
      button.textContent = t("status.linking");
      setStatus(t("status.establishing"), "neutral", { loading: true });
      clearSearchTimers();
      searchTimers.push(setTimeout(() => {
        setStatus(t("status.querying"), "neutral", { loading: true });
      }, 800));
      searchTimers.push(setTimeout(() => {
        setStatus(t("status.decrypting"), "neutral", { loading: true });
      }, 1600));

      const target = `safety.html?id=${encodeURIComponent(id)}`;
      window.setTimeout(() => {
        window.location.href = target;
      }, 2400);    }

    $("continueBtn").addEventListener("click", goToClient);
    $("clientId").addEventListener("keydown", (e) => {
      if (e.key === "Enter") goToClient();
    });
  </script>
</body>
</html>
